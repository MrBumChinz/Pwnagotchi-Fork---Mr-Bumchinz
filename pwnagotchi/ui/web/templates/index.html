{% extends "base.html" %}
{% set active_page = "home" %}

{% block title %}
{{ title }} | Pwnagotchi
{% endblock %}

{% block script %}
window.onload = function() {
    var image = document.getElementById("ui");
    var statusDot = document.getElementById("status-dot");
    
    function updateImage() {
        image.src = image.src.split("?")[0] + "?" + new Date().getTime();
    }
    
    // Update every second
    setInterval(updateImage, 1000);
    
    // Pulse animation for status
    setInterval(function() {
        statusDot.classList.toggle('pulse-animation');
    }, 1500);
}
{% endblock %}

{% block content %}
<div class="page-header">
    <h1>{{ title }}</h1>
    <p>
        <span id="status-dot" class="status-badge status-online">â— ACTIVE</span>
        <span style="margin-left: 15px;">Mode: <strong>{{ other_mode }}</strong> available</span>
    </p>
</div>

<div class="image-wrapper">
    <img class="ui-image pixelated glow-animation" src="/ui" id="ui" alt="Pwnagotchi Display"/>
</div>

<div class="action-buttons">
    <form class="action" method="post" action="/shutdown"
          onsubmit="return confirm('âš ï¸ This will halt the unit. Continue?');">
        <input type="submit" class="button btn-danger" value="ğŸ”´ Shutdown"/>
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
    </form>
    
    <form class="action" method="post" action="/reboot"
          onsubmit="return confirm('âš ï¸ This will reboot the unit. Continue?');">
        <input type="submit" class="button btn-warning" value="ğŸ”„ Reboot"/>
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
    </form>
    
    <form class="action" method="post" action="/restart"
          onsubmit="return confirm('âš ï¸ Restart the service in {{ other_mode }} mode?');">
        <input type="submit" class="button" value="âš¡ {{ other_mode }} Mode"/>
        <input type="hidden" name="mode" value="{{ other_mode }}"/>
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
    </form>
</div>

<div style="padding: 20px;">
    <div class="card">
        <h3 style="color: var(--accent-color); margin-bottom: 15px;">ğŸ“Š Quick Stats</h3>
        <div class="face-preview-grid">
            <div class="face-preview-item">
                <div class="face">ğŸ‘ï¸</div>
                <div class="label">Display</div>
            </div>
            <div class="face-preview-item">
                <div class="face">ğŸ“¡</div>
                <div class="label">Networks</div>
            </div>
            <div class="face-preview-item">
                <div class="face">ğŸ¤–</div>
                <div class="label">AI Active</div>
            </div>
            <div class="face-preview-item">
                <div class="face">ğŸ”‹</div>
                <div class="label">Power</div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
